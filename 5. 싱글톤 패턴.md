# ì‹±ê¸€í†¤ íŒ¨í„´

> í´ë˜ìŠ¤ ì¸ìŠ¤í„´ìŠ¤ë¥¼ **í•˜ë‚˜**ë§Œ ë§Œë“¤ê³ , ê·¸ ì¸ìŠ¤í„´ìŠ¤ë¡œì˜ ì „ì—­ ì ‘ê·¼ì„ ì œê³µí•˜ëŠ” íŒ¨í„´

<br/>

1. í´ë˜ìŠ¤ì—ì„œ ì¸ìŠ¤í„´ìŠ¤ë¥¼ í•˜ë‚˜ë§Œ ê´€ë¦¬í•˜ë„ë¡ ë§Œë“¤ì–´ì•¼í•¨
2. ì–´ë””ì„œë“  í•´ë‹¹ ì¸ìŠ¤í„´ìŠ¤ì— ì ‘ê·¼í•  ìˆ˜ ìˆë„ë¡ ì „ì—­ ì ‘ê·¼ ì§€ì ì„ ì œê³µí•´ì•¼í•¨

<br/>

# ìë°” ë²„ì „

class ì‹±ê¸€í†¤ vs enum ì‹±ê¸€í†¤

<br/>

## 1. class ìƒê¸€í†¤

ì˜ˆ) ê³ ì „ì  ì‹±ê¸€í„´ íŒ¨í„´

```java
public class Singleton {
  private static Singleton uniqueInstance;

  // private: í´ë˜ìŠ¤ë‚´ì—ì„œë§Œ ì ‘ê·¼ ê°€ëŠ¥
  // ìƒì„±ì í•¨ìˆ˜ë¥¼ í´ë˜ìŠ¤ ì™¸ë¶€ì—ì„œ ì ‘ê·¼í•˜ì§€ ëª»í•˜ê²Œ í•´ì„œ ì¸ìŠ¤í„´ìŠ¤ ìƒì„±ì„ ë§‰ìŒ => ì¸ìŠ¤í„´ìŠ¤ í•˜ë‚˜ë§Œ ìƒì„±!
  private Singletion() {}

  // static: ì¸ìŠ¤í„´ìŠ¤ê°€ ì•„ë‹ˆë¼ í´ë˜ìŠ¤ì— ê³ ì •ë¨, ì¸ìŠ¤í„´ìŠ¤ë¥¼ ìƒì„±í•˜ì§€ ì•Šì•„ë„ ì‚¬ìš© ê°€ëŠ¥
  public static Singleton getInstance() {
    if (uniqueInstance == null) {
      // í•„ìš”í•  ë•Œ ê°ì²´ë¥¼ ìƒì„±í•¨ (lazy-instantiation)
      uniqueInstance = new Singleton();
    }

    return uniqueInstance;
  }
}
```

```java
// ì–´ë””ì„œë“  ì •ì  ë©”ì†Œë“œë¥¼ í†µí•´ ì‚¬ìš©í•  ìˆ˜ ìˆìŒ => ì „ì—­ ì ‘ê·¼ ì§€ì  ì œê³µ!
Singleton.getInstance()
```

<br/>

### ë¬¸ì œì  ë° í•´ê²°ì±…

- ë©€í‹°ìŠ¤ë ˆë”©

  - getInstanceí•¨ìˆ˜ ë™ê¸°í™”(synchronized) ì‹œí‚¤ê¸° => ì„±ëŠ¥ 100ë°° ì €í•˜ğŸ’¦
  - ì¸ìŠ¤í„´ìŠ¤ ì²˜ìŒë¶€í„° ë§Œë“¤ì–´ ë†“ê¸° => ëŸ°íƒ€ì„ì— í•´ë‹¹ í´ë˜ìŠ¤ë¥¼ ì‚¬ìš©í•˜ì§€ ì•Šì•„ë„ ì‹±ê¸€í†¤ ì¸ìŠ¤í„´ìŠ¤ê°€ ìƒì„±ë˜ ìì› ë‚­ë¹„ğŸ’¦
  - DCL (Double-Checked Locking) ì‚¬ìš©

- ë¦¬í”Œë ‰ì…˜, ì§ë ¬í™”, ì—­ì§ë ¬í™”ë“±ì—ì„œ ì‹±ê¸€í„´ ì†ì„±ì„ ìœ„ë°˜í•¨
  <br/><br/>

## 2. enum ìƒê¸€í†¤

- enumì´ë€?
  - ìƒìˆ˜ë“¤ë§Œ ëª¨ì•„ë†“ì€ í´ë˜ìŠ¤
  - ê³ ì •ëœ ìƒìˆ˜ë“¤ì˜ ì§‘í•©ìœ¼ë¡œ ì»´íŒŒì¼íƒ€ì„ì— ëª¨ë“  ê°’ì„ ì•Œê³  ìˆì–´ì•¼í•¨ (ìƒì„±ìê°€ privateë¡œ ì œí•œ)
  - thread safe, JVMì´ Serialization ë³´ì¥
    <br/>
    => ì‹±ê¸€í†¤ì— ìì£¼ ì‚¬ìš©
    <br/>

```java
public enum SingletonEnum {
  UNIQUE_INSTANCE;
}
```

<br/>

# JSì— ì ìš©í•´ë³´ê¸°

ì ‘ê·¼ì œí•œìê°€ ì—†ê¸° ë•Œë¬¸ì— ë¹„ê³µê°œ í”„ë¡œí¼í‹° ë° í•¨ìˆ˜ë¥¼ ì •ì˜í•˜ë ¤ë©´ í´ë¡œì € ë° ì¦‰ì‹œ ì‹¤í–‰ í•¨ìˆ˜ (IIFE)ë¡œ ìƒì„±

```javascript
const Singleton = (function () {
  let uniqueInstance;

  // ë¹„ê³µê°œ ë©”ì„œë“œ ì •ì˜
  function init() {
    return {
      // ê³µê°œ í”„ë¡œí¼í‹° ë° ë©”ì„œë“œ
      prop: "public property",
      method: function () {
        return "public method";
      },
    };
  }

  return {
    getInstance: function () {
      if (!uniqueInstance) {
        uniqueInstance = init();
      }

      return uniqueInstance;
    },
  };
})();
```

```javascript
const foo = SingletonClass.getInstance();
const boo = SingletonClass.getInstance();

console.log(foo.prop); // public property
console.log(boo.method()); // public method
console.log(foo === boo); // true
```

# ì‚¬ë¡€ ì°¾ì•„ë³´ê¸°

- ê°ì²´ ë¦¬í„°ëŸ´, jQuery, ìƒíƒœê´€ë¦¬ (redux, mobx)
  <br/><br/>
  ![image](https://cdn-images-1.medium.com/max/949/1*3lvNEQE4SF6Z1l-680cfSQ.jpeg)
  <br/><br/>
- PCì§€ë„ ê³µìœ í•˜ê¸° ê°ì²´
  <br/>
  https://kakao.agit.in/g/300026313/wall/316846628
  https://github.daumkakao.com/localservice/map/blob/develop/src/main/webapp/js/app/controller/ShareController.js#L46
